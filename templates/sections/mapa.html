  <!-- Sección 2: Mapa interactivo -->
  <section id="map-section" class="relative min-h-[600px] py-16 md:py-24 bg-gradient-to-b from-[#e5e7eb] to-[#f4f4f8] flex items-center justify-center px-4 overflow-hidden mb-24">
    <svg class="orbit-bg animate-[pulse_16s_ease-in-out_infinite]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
      <g fill="#6366f1" opacity="0.2">
        <polygon points="100,100 130,120 100,140 70,120" />
        <polygon points="300,200 330,220 300,240 270,220" />
        <polygon points="600,400 630,420 600,440 570,420" />
      </g>
      <g fill="#a855f7" opacity="0.15">
        <polygon points="200,300 220,330 240,300 220,270" />
        <polygon points="500,150 520,180 540,150 520,120" />
      </g>
    </svg>
    <div class="max-w-6xl w-full grid grid-cols-1 md:grid-cols-2 gap-10 items-stretch relative z-10">
      <div class="fade-in space-y-6 flex flex-col justify-center">
        <h2 class="text-3xl md:text-5xl font-bold">Explora tu región</h2>
        <p class="text-lg text-gray-700">Selecciona una carrera para visualizar las regiones donde puedes estudiarla.</p>
        <select id="select-carrera" class="px-5 py-3 rounded-xl bg-white text-black w-full shadow-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
          <option disabled selected>Selecciona una carrera</option>
        </select>
        <p class="text-sm text-gray-500">Podrás ver el mapa interactivo con puntos y detalles de universidades en tiempo real.</p>
      </div>
      <div class="fade-in flex items-center justify-center">
        <div id="mapa-leaflet" style="height: 350px; width: 100%; min-width: 300px; min-height: 300px;" class="rounded-2xl shadow-lg border-2 border-indigo-500"></div>
      </div>
    </div>
  </section>
  <!-- Overlay oscuro para el panel inferior -->
  <div id="panel-overlay" class="fixed inset-0 bg-black bg-opacity-40 z-40 transition-opacity duration-300 opacity-0 pointer-events-none" style="display:none;"></div>
  <!-- Panel inferior para mostrar universidades de la ciudad seleccionada -->
  <div id="panel-universidades" class="fixed left-0 bottom-0 w-full min-h-[180px] max-h-[50vh] bg-white shadow-2xl rounded-t-2xl border-t-4 border-indigo-500 z-50 px-4 pt-4 pb-2 transition-transform duration-300 translate-y-full" style="display:none; overflow-y:visible;">
    <div class="flex flex-col items-center">
      <div class="w-12 h-1.5 bg-indigo-200 rounded-full mb-2"></div>
    </div>
    <div class="flex justify-between items-center mb-2 sticky top-0 bg-white z-10 pb-2">
      <h3 id="panel-titulo" class="text-xl md:text-2xl font-bold text-indigo-700">Universidades en Ciudad</h3>
      <button id="cerrar-panel" class="text-gray-500 hover:text-indigo-600 text-2xl font-bold">&times;</button>
    </div>
    <div class="relative">
      <button class="glider-prev absolute left-0 top-1/2 -translate-y-1/2 bg-indigo-100 text-indigo-700 rounded-full w-8 h-8 flex items-center justify-center z-20" aria-label="Anterior" style="left:-18px;"><svg width="18" height="18" fill="none" viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6" stroke="#6366f1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
      <div id="panel-lista-universidades" class="glider"></div>
      <button class="glider-next absolute right-0 top-1/2 -translate-y-1/2 bg-indigo-100 text-indigo-700 rounded-full w-8 h-8 flex items-center justify-center z-20" aria-label="Siguiente" style="right:-18px;"><svg width="18" height="18" fill="none" viewBox="0 0 24 24"><path d="M9 6l6 6-6 6" stroke="#6366f1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
    </div>
    <div role="tablist" class="glider-dots flex justify-center mt-2"></div>
  </div> 
  <style>
  @keyframes panelWow {
    0% { transform: translateY(100%) scale(0.98); opacity: 0; }
    60% { transform: translateY(-10px) scale(1.02); opacity: 1; }
    80% { transform: translateY(0px) scale(0.98); }
    100% { transform: translateY(0) scale(1); opacity: 1; }
  }
  .animate-panel-wow {
    animation: panelWow 0.7s cubic-bezier(.68,-0.55,.27,1.55);
  }
  </style>